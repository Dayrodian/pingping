# üéÆ –í–Ω–µ—à–Ω—è—è –∏–≥—Ä–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞

## –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –≤–Ω–µ—à–Ω–µ–≥–æ URL:
```
https://stellular-syrniki-3e95d4.netlify.app/
```

## –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å CTA –≤ —ç—Ç—É –∏–≥—Ä—É

–ß—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å CTA –º–æ–¥–∞–ª–∫—É –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –≤ –≤–∞—à—É –∏–≥—Ä—É.

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏–≥—Ä—ã

–ó–∞–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Ñ–∞–π–ª—ã –≤–∞—à–µ–π –∏–≥—Ä—ã –Ω–∞:
https://stellular-syrniki-3e95d4.netlify.app/

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π

–í –≥–ª–∞–≤–Ω—ã–π JS —Ñ–∞–π–ª –∏–≥—Ä—ã –¥–æ–±–∞–≤—å—Ç–µ:

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É (–ª–µ–Ω–¥–∏–Ω–≥—É)
function sendToParent(type, data = {}) {
  try {
    window.parent.postMessage({
      type: type,
      ...data
    }, '*');
    console.log('üì§ Sent to parent:', type, data);
  } catch (e) {
    console.warn('Could not send message to parent:', e);
  }
}

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ iframe
const isInIframe = window.self !== window.top;
console.log('Is in iframe:', isInIframe);
```

### –®–∞–≥ 3: –í—ã–∑–æ–≤–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å CTA

–î–æ–±–∞–≤—å—Ç–µ –≤—ã–∑–æ–≤—ã –≤ –Ω—É–∂–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö:

```javascript
// –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä 20 —Å–µ–∫—É–Ω–¥)
setTimeout(() => {
  sendToParent('SHOW_CTA', {
    score: currentScore || 0,
    time: 20,
    level: currentLevel || 1
  });
}, 20000);

// –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ score
if (score >= 50) {
  sendToParent('SHOW_CTA', {
    score: score,
    time: gameTime,
    level: level
  });
}

// –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–∏ Game Over
function onGameOver() {
  sendToParent('SHOW_CTA', {
    score: finalScore,
    time: totalTime
  });
}

// –í–∞—Ä–∏–∞–Ω—Ç 4: –ü–æ—Å–ª–µ N –∫–ª–∏–∫–æ–≤/–¥–µ–π—Å—Ç–≤–∏–π
clickCount++;
if (clickCount === 10) {
  sendToParent('SHOW_CTA', { score: score });
}
```

### –®–∞–≥ 4: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è

```javascript
// –°—Ç–∞—Ä—Ç –∏–≥—Ä—ã
sendToParent('GAME_START');

// Game Over
sendToParent('GAME_OVER', { score: finalScore });

// –ü–æ–±–µ–¥–∞
sendToParent('GAME_WIN', { score: finalScore });
```

### –®–∞–≥ 5: –ó–∞–¥–µ–ø–ª–æ–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –∏–≥—Ä—É

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:
1. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. Netlify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç
3. –û–±–Ω–æ–≤–∏—Ç–µ –ª–µ–Ω–¥–∏–Ω–≥ (Ctrl+F5)
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ:
```
http://localhost:3000
```

### Production:
```
https://–≤–∞—à-–ª–µ–Ω–¥–∏–Ω–≥.netlify.app/
```

–ò–≥—Ä–∞ –¥–æ–ª–∂–Ω–∞:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –≤ iframe
- ‚úÖ –ë—ã—Ç—å –∏–≥—Ä–∞–±–µ–ª—å–Ω–æ–π
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å CTA –º–æ–¥–∞–ª–∫—É –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏

## –ü—Ä–æ–±–ª–µ–º—ã?

### CTA –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏: `üì§ Sent to parent: SHOW_CTA`
3. –ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `sendToParent` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

### –ò–≥—Ä–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∏–≥—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ URL
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏ CORS
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –∏–≥—Ä—É –Ω–∞–ø—Ä—è–º—É—é –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ

### CORS –æ—à–∏–±–∫–∏
–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- postMessage —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ —Å CORS
- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –≤–∞—à–µ–π –∏–≥—Ä—ã

–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

```javascript
// –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
function sendToParent(type, data = {}) {
  window.parent.postMessage({ type, ...data }, '*');
}

// –í –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ 15 —Å–µ–∫)
setTimeout(() => {
  sendToParent('SHOW_CTA', {
    score: 100,  // –í–∞—à —Ç–µ–∫—É—â–∏–π score
    time: 15     // –í—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  });
}, 15000);
```

–í—Å—ë! –≠—Ç–æ –º–∏–Ω–∏–º—É–º –¥–ª—è —Ä–∞–±–æ—Ç—ã CTA.


